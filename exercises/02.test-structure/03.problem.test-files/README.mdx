# Test files

Right now, we keep our tests in the same file as the code they verify. If someone imports `greet.js`, they will also import and run the tests, which is not something we want in production (we should be concerned with the tests, not our users).

<callout-warning>This testing approach is called _in-source testing_ and can be handy when unit testing or prototyping but requires additional setup to be used properly. In this workshop, we will move away from it to a more common file-based approach.</callout-warning>

A far more resilient strategy is to keep the tests separate from the source code. By doing so, we keep the source clean while also having freedom to structure and evolve the tests (e.g. split them by behavior, move them around, and delete them).

There are multiple ways to structure test files. You can keep them next to the source files, or put them in a designated `test`/`__test__` directories. Those are stylistic choices, and as with any such choices, **consistency is the only thing that matters**.

It is a good practice, however, to keep the association between the source code and the test file. Often, this is done by naming the test similar to the module it verifies and adding a `.test.js` or `.spec.js` suffix to it.

```txt lines=2 nonumber
â”œâ”€â”€ greet.js
â””â”€â”€ greet.test.js
```

ğŸ‘¨â€ğŸ’¼ In this one, your task will be to move all the existing tests into a designated test file.

It's going to involve moving code around but don't worry, Kody the Koala is here to help!

ğŸ¨ First, <InlineFile file="greet.test.js">Click here to create the `greet.test.js` file</InlineFile>

ğŸ¨ Once the `greet.test.js` file is created, move the existing tests from `greet.js` there.

Next, you have to make the `test()` and `expect()` functions be available _globally_ for the `greet.test.js` file. To do that, use the `--loader` option on the Node.js CLI.

ğŸ¨ To start, <InlineFile file="setup.js">Click here to create the `setup.js` file</InlineFile>

Then, move the declaration for the `test()` and `expect()` functions to the newly created `setup.js` file.

Finally, to run the tests, use the `--loader` option of the Node.js CLI to reference the `setup.js` as a global file to include:

```sh
node --loader setup.js greet.test.js
```
